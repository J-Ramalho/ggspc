<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="6.1 xbar and R charts | industRial data science" />
<meta property="og:type" content="book" />


<meta property="og:description" content="The output format is bookdown::bookdown_site." />


<meta name="author" content="João Ramalho" />

<meta name="date" content="2021-01-20" />


<meta name="description" content="The output format is bookdown::bookdown_site.">

<title>6.1 xbar and R charts | industRial data science</title>

<script src="libs/header-attrs-2.6/header-attrs.js"></script>
<script src="libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="libs/navigation-1.1/tabsets.js"></script>




<link rel="stylesheet" href="style.css" type="text/css" />

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
</style>
</head>

<body>

<div class="container-fluid main-container">


<div class="row">
<div class="col-sm-12">
<div id="TOC">
<ul>
<li><a href="index.html#introduction">Introduction</a></li>
<li class="part"><span><b>I FRAMEWORK</b></span></li>
<li><a href="1-dfss-design-for-six-sigma.html#dfss---design-for-six-sigma"><span class="toc-section-number">1</span> DFSS - Design for Six Sigma</a></li>
<li><a href="2-statistics.html#statistics"><span class="toc-section-number">2</span> Statistics</a></li>
<li><a href="3-r-and-data-science.html#r-and-data-science"><span class="toc-section-number">3</span> R and Data Science</a>
<ul>
<li><a href="3-1-why-r.html#why-r"><span class="toc-section-number">3.1</span> Why R</a></li>
<li><a href="3-2-usefull-packages.html#usefull-packages"><span class="toc-section-number">3.2</span> Usefull packages</a></li>
</ul></li>
<li class="part"><span><b>II CASE STUDIES</b></span></li>
<li><a href="4-DOE.html#DOE"><span class="toc-section-number">4</span> DOE - Design of Experiments</a>
<ul>
<li><a href="4-1-simple-comparative-experiments.html#simple-comparative-experiments"><span class="toc-section-number">4.1</span> Simple comparative experiments</a>
<ul>
<li><a href="4-1-simple-comparative-experiments.html#the-cement-example"><span class="toc-section-number">4.1.1</span> The Cement example</a></li>
<li><a href="4-1-simple-comparative-experiments.html#homogeneity-of-variances-test-levene-test"><span class="toc-section-number">4.1.2</span> Homogeneity of variances test (Levene Test)</a></li>
<li><a href="4-1-simple-comparative-experiments.html#sample-size-calculation"><span class="toc-section-number">4.1.3</span> Sample size calculation</a></li>
<li><a href="4-1-simple-comparative-experiments.html#t-test-paired"><span class="toc-section-number">4.1.4</span> t-test paired</a></li>
</ul></li>
<li><a href="4-2-single-factor-designs.html#single-factor-designs"><span class="toc-section-number">4.2</span> Single factor designs</a>
<ul>
<li><a href="4-2-single-factor-designs.html#plasma-etching-example"><span class="toc-section-number">4.2.1</span> Plasma etching example</a></li>
<li><a href="4-2-single-factor-designs.html#analysis-of-variance"><span class="toc-section-number">4.2.2</span> Analysis of variance</a></li>
<li><a href="4-2-single-factor-designs.html#single-factor-anova-fixed-effects-model"><span class="toc-section-number">4.2.3</span> Single factor Anova, fixed effects model</a></li>
<li><a href="4-2-single-factor-designs.html#model-adequacy-check"><span class="toc-section-number">4.2.4</span> Model adequacy check</a></li>
<li><a href="4-2-single-factor-designs.html#residuals-normality-check-outliers"><span class="toc-section-number">4.2.5</span> Residuals normality check &amp; outliers</a></li>
<li><a href="4-2-single-factor-designs.html#plot-of-residuals-in-time-sequence"><span class="toc-section-number">4.2.6</span> Plot of residuals in time sequence</a></li>
<li><a href="4-2-single-factor-designs.html#plot-of-residuals-versus-fitted-values"><span class="toc-section-number">4.2.7</span> Plot of residuals versus fitted values</a></li>
<li><a href="4-2-single-factor-designs.html#equality-of-variances-test-barletts-test"><span class="toc-section-number">4.2.8</span> Equality of variances test (Barlett’s test)</a></li>
<li><a href="4-2-single-factor-designs.html#tuckeys-pairwise-comparison-test"><span class="toc-section-number">4.2.9</span> Tuckey’s pairwise comparison test</a></li>
<li><a href="4-2-single-factor-designs.html#fishers-lsd---pairwise-comparison-test"><span class="toc-section-number">4.2.10</span> Fisher’s LSD - pairwise comparison test</a></li>
<li><a href="4-2-single-factor-designs.html#practical-interpretation-of-results"><span class="toc-section-number">4.2.11</span> Practical interpretation of results</a></li>
<li><a href="4-2-single-factor-designs.html#linear-model"><span class="toc-section-number">4.2.12</span> Linear model</a></li>
<li><a href="4-2-single-factor-designs.html#linear-model-plot"><span class="toc-section-number">4.2.13</span> Linear model plot</a></li>
<li><a href="4-2-single-factor-designs.html#predicting-new-values"><span class="toc-section-number">4.2.14</span> Predicting new values</a></li>
<li><a href="4-2-single-factor-designs.html#r²-coefficient-of-determination"><span class="toc-section-number">4.2.15</span> R², coefficient of determination</a></li>
<li><a href="4-2-single-factor-designs.html#sample-size-calculation-1"><span class="toc-section-number">4.2.16</span> Sample size calculation</a></li>
</ul></li>
<li><a href="4-3-two-factors-anova-fixed-effects-model.html#two-factors-anova-fixed-effects-model"><span class="toc-section-number">4.3</span> two-factors ANOVA, fixed effects model</a>
<ul>
<li><a href="4-3-two-factors-anova-fixed-effects-model.html#battery-life-example"><span class="toc-section-number">4.3.1</span> Battery life example</a></li>
<li><a href="4-3-two-factors-anova-fixed-effects-model.html#analysis-of-variance-1"><span class="toc-section-number">4.3.2</span> Analysis of variance</a></li>
<li><a href="4-3-two-factors-anova-fixed-effects-model.html#doe-and-anova-plots"><span class="toc-section-number">4.3.3</span> DoE and Anova plots</a></li>
<li><a href="4-3-two-factors-anova-fixed-effects-model.html#r²-coefficient-of-determination-1"><span class="toc-section-number">4.3.4</span> R², coefficient of determination</a></li>
<li><a href="4-3-two-factors-anova-fixed-effects-model.html#model-adequacy-checking"><span class="toc-section-number">4.3.5</span> Model adequacy checking</a></li>
<li><a href="4-3-two-factors-anova-fixed-effects-model.html#residuals-normality-check-outliers-1"><span class="toc-section-number">4.3.6</span> Residuals normality check &amp; outliers</a></li>
<li><a href="4-3-two-factors-anova-fixed-effects-model.html#plot-of-residuals-versus-fitted-values-1"><span class="toc-section-number">4.3.7</span> Plot of residuals versus fitted values</a></li>
<li><a href="4-3-two-factors-anova-fixed-effects-model.html#sample-size-calculation-2"><span class="toc-section-number">4.3.8</span> Sample size calculation</a></li>
<li><a href="4-3-two-factors-anova-fixed-effects-model.html#model-with-no-interaction"><span class="toc-section-number">4.3.9</span> Model with no interaction</a></li>
</ul></li>
<li><a href="4-4-general-factorial-design.html#general-factorial-design"><span class="toc-section-number">4.4</span> General factorial design</a>
<ul>
<li><a href="4-4-general-factorial-design.html#soft-drink-bottling-example"><span class="toc-section-number">4.4.1</span> Soft Drink bottling example</a></li>
<li><a href="4-4-general-factorial-design.html#analysis-of-variance-2"><span class="toc-section-number">4.4.2</span> Analysis of variance</a></li>
<li><a href="4-4-general-factorial-design.html#residuals-analysis"><span class="toc-section-number">4.4.3</span> Residuals analysis</a></li>
<li><a href="4-4-general-factorial-design.html#doe-plots"><span class="toc-section-number">4.4.4</span> DoE plots</a></li>
</ul></li>
<li><a href="4-5-the-2k-factorial-designs.html#the-2k-factorial-designs"><span class="toc-section-number">4.5</span> The 2^k factorial designs</a></li>
<li><a href="4-6-the-22-factorial-design.html#the-22-factorial-design"><span class="toc-section-number">4.6</span> The 2^2 Factorial Design</a>
<ul>
<li><a href="4-6-the-22-factorial-design.html#the-chemical-process-example"><span class="toc-section-number">4.6.1</span> The Chemical Process example</a></li>
<li><a href="4-6-the-22-factorial-design.html#anova"><span class="toc-section-number">4.6.2</span> Anova</a></li>
<li><a href="4-6-the-22-factorial-design.html#regression-model-prediction"><span class="toc-section-number">4.6.3</span> Regression model / Prediction</a></li>
<li><a href="4-6-the-22-factorial-design.html#response-surface"><span class="toc-section-number">4.6.4</span> Response surface</a></li>
</ul></li>
<li><a href="4-7-the-23-factorial-design.html#the-23-factorial-design"><span class="toc-section-number">4.7</span> The 2^3 Factorial Design</a>
<ul>
<li><a href="4-7-the-23-factorial-design.html#the-plasma-etching-example"><span class="toc-section-number">4.7.1</span> The plasma etching example</a></li>
<li><a href="4-7-the-23-factorial-design.html#anova-1"><span class="toc-section-number">4.7.2</span> Anova</a></li>
<li><a href="4-7-the-23-factorial-design.html#regression-model-prediction-1"><span class="toc-section-number">4.7.3</span> Regression model / Prediction</a></li>
<li><a href="4-7-the-23-factorial-design.html#reduced-model"><span class="toc-section-number">4.7.4</span> Reduced model</a></li>
<li><a href="4-7-the-23-factorial-design.html#doe-plots-1"><span class="toc-section-number">4.7.5</span> DoE plots</a></li>
</ul></li>
<li><a href="4-8-the-general-2k-design.html#the-general-2k-design"><span class="toc-section-number">4.8</span> The general 2^k design</a>
<ul>
<li><a href="4-8-the-general-2k-design.html#calculating-the-number-combinations"><span class="toc-section-number">4.8.1</span> Calculating the number combinations</a></li>
<li><a href="4-8-the-general-2k-design.html#relationship-coded-vs-natural-variables"><span class="toc-section-number">4.8.2</span> Relationship coded vs natural variables</a></li>
</ul></li>
<li><a href="4-9-single-replicate-2k-design.html#single-replicate-2k-design"><span class="toc-section-number">4.9</span> Single replicate 2^k design</a>
<ul>
<li><a href="4-9-single-replicate-2k-design.html#the-filtration-example"><span class="toc-section-number">4.9.1</span> The Filtration example</a></li>
<li><a href="4-9-single-replicate-2k-design.html#anova-2"><span class="toc-section-number">4.9.2</span> Anova</a></li>
<li><a href="4-9-single-replicate-2k-design.html#linear-regression---plot-of-effects"><span class="toc-section-number">4.9.3</span> Linear regression - Plot of effects</a></li>
<li><a href="4-9-single-replicate-2k-design.html#doe-plots-2"><span class="toc-section-number">4.9.4</span> DoE plots</a></li>
<li><a href="4-9-single-replicate-2k-design.html#anova-reduced-model-significant-effects-only"><span class="toc-section-number">4.9.5</span> Anova reduced model (significant effects only)</a></li>
<li><a href="4-9-single-replicate-2k-design.html#linear-regression---reduced-model"><span class="toc-section-number">4.9.6</span> Linear regression - reduced model</a></li>
<li><a href="4-9-single-replicate-2k-design.html#residuals-normality-check"><span class="toc-section-number">4.9.7</span> Residuals normality check</a></li>
</ul></li>
<li><a href="4-10-two-level-fractional-factorial-designs.html#two-level-fractional-factorial-designs"><span class="toc-section-number">4.10</span> Two level fractional factorial designs</a>
<ul>
<li><a href="4-10-two-level-fractional-factorial-designs.html#the-one-half-fraction-of-th-2k-design"><span class="toc-section-number">4.10.1</span> The One-Half Fraction of th 2k Design</a></li>
<li><a href="4-10-two-level-fractional-factorial-designs.html#the-filtration-example-modified"><span class="toc-section-number">4.10.2</span> The filtration example (modified)</a></li>
<li><a href="4-10-two-level-fractional-factorial-designs.html#anova-3"><span class="toc-section-number">4.10.3</span> Anova</a></li>
</ul></li>
</ul></li>
<li><a href="5-MSA.html#MSA"><span class="toc-section-number">5</span> MSA - Measurement System Analysis</a></li>
<li><a href="6-SPC.html#SPC"><span class="toc-section-number">6</span> SPC - Statistical Process Control</a>
<ul>
<li><a href="6-1-xbar-and-r-charts.html#xbar-and-r-charts"><span class="toc-section-number">6.1</span> xbar and R charts</a></li>
</ul></li>
<li class="part"><span><b>III TOOLBOX</b></span></li>
<li><a href="7-Rpck.html#Rpck"><span class="toc-section-number">7</span> R Packages</a>
<ul>
<li><a href="7-1-six-sigma.html#six-sigma"><span class="toc-section-number">7.1</span> six sigma</a></li>
<li><a href="7-2-ggspc.html#ggspc"><span class="toc-section-number">7.2</span> ggspc</a></li>
<li><a href="7-3-qcc.html#qcc"><span class="toc-section-number">7.3</span> qcc</a></li>
</ul></li>
<li><a href="about-the-authors.html#about-the-authors">About the authors</a></li>
<li><a href="references.html#references">References</a></li>
</ul>
</div>
</div>
</div>
<div class="row">
<div class="col-sm-12">
<div id="xbar-and-r-charts" class="section level2" number="6.1">
<h2><span class="header-section-number">6.1</span> xbar and R charts</h2>
<p>The package {qcc} has been selected to create the control charts.</p>
<pre class="r"><code>library(qcc)</code></pre>
<pre><code>## Package &#39;qcc&#39; version 2.7</code></pre>
<pre><code>## Type &#39;citation(&quot;qcc&quot;)&#39; for citing this R package in publications.</code></pre>
<p>The chart ploting function qcc() already considers that each line corresponds to a sampling event and requires as argument a table containing only the sampling values. For that the Hour column has to be removed.</p>
<pre class="r"><code>bamako_clean &lt;- bamako %&gt;% dplyr::select(-Hour)</code></pre>
<p>Before entering regular production it is recommended to run a “calibration run.” The calibration run is used to calculate the control limits. Using the first 10 samples a default Shewart xbar chart can be obtained as follows:</p>
<pre class="r"><code>qcc(bamako_clean[1:10, ], 
    type = &quot;xbar&quot;, 
    title = &quot;Lamp weight \n xbar chart&quot;, 
    xlab = &quot;Sample group&quot;)</code></pre>
<p><img src="IndustRialds_files/figure-html/unnamed-chunk-49-1.png" width="672" /></p>
<pre><code>## List of 11
##  $ call      : language qcc(data = bamako_clean[1:10, ], type = &quot;xbar&quot;, title = &quot;Lamp weight \n xbar chart&quot;,      xlab = &quot;Sample group&quot;)
##  $ type      : chr &quot;xbar&quot;
##  $ data.name : chr &quot;bamako_clean[1:10, ]&quot;
##  $ data      : num [1:10, 1:6] 9.99 9.97 9.98 10.07 10.01 ...
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##  $ statistics: Named num [1:10] 9.99 9.98 10.02 10.03 9.99 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:10] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; ...
##  $ sizes     : int [1:10] 6 6 6 6 6 6 6 6 6 6
##  $ center    : num 10
##  $ std.dev   : num 0.0402
##  $ nsigmas   : num 3
##  $ limits    : num [1, 1:2] 9.95 10.05
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##  $ violations:List of 2
##  - attr(*, &quot;class&quot;)= chr &quot;qcc&quot;</code></pre>
<pre class="r"><code>qcc(bamako_clean[1:10, ], 
    type = &quot;R&quot;, 
    title = &quot;Lamp weight \n R chart&quot;,
    xlab = &quot;Sample group&quot;)</code></pre>
<p><img src="IndustRialds_files/figure-html/unnamed-chunk-49-2.png" width="672" /></p>
<pre><code>## List of 11
##  $ call      : language qcc(data = bamako_clean[1:10, ], type = &quot;R&quot;, title = &quot;Lamp weight \n R chart&quot;,      xlab = &quot;Sample group&quot;)
##  $ type      : chr &quot;R&quot;
##  $ data.name : chr &quot;bamako_clean[1:10, ]&quot;
##  $ data      : num [1:10, 1:6] 9.99 9.97 9.98 10.07 10.01 ...
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##  $ statistics: Named num [1:10] 0.0652 0.0833 0.1302 0.1286 0.0818 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:10] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; ...
##  $ sizes     : int [1:10] 6 6 6 6 6 6 6 6 6 6
##  $ center    : num 0.102
##  $ std.dev   : num 0.0402
##  $ nsigmas   : num 3
##  $ limits    : num [1, 1:2] 0 0.204
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##  $ violations:List of 2
##  - attr(*, &quot;class&quot;)= chr &quot;qcc&quot;</code></pre>
<p>Afterwards, the production samples can be assessed against those limits and the control chart rules can be verified. In this example the shewhart rules are used.</p>
<pre class="r"><code>qcc(data = bamako_clean[1:10, ],
    newdata = bamako_clean[11:25,],
    type = &quot;xbar&quot;, 
    title = &quot;Lamp weight \n xbar chart&quot;, 
    xlab = &quot;Sample group&quot;)</code></pre>
<p><img src="IndustRialds_files/figure-html/unnamed-chunk-50-1.png" width="672" /></p>
<pre><code>## List of 15
##  $ call        : language qcc(data = bamako_clean[1:10, ], type = &quot;xbar&quot;, newdata = bamako_clean[11:25,      ], title = &quot;Lamp weight \n xba| __truncated__
##  $ type        : chr &quot;xbar&quot;
##  $ data.name   : chr &quot;bamako_clean[1:10, ]&quot;
##  $ data        : num [1:10, 1:6] 9.99 9.97 9.98 10.07 10.01 ...
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##  $ statistics  : Named num [1:10] 9.99 9.98 10.02 10.03 9.99 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:10] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; ...
##  $ sizes       : int [1:10] 6 6 6 6 6 6 6 6 6 6
##  $ center      : num 10
##  $ std.dev     : num 0.0402
##  $ newstats    : Named num [1:15] 9.98 9.99 10.01 10.01 10.02 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:15] &quot;11&quot; &quot;12&quot; &quot;13&quot; &quot;14&quot; ...
##  $ newdata     : num [1:15, 1:6] 9.94 10.01 10.01 9.98 10.03 ...
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##  $ newsizes    : int [1:15] 6 6 6 6 6 6 6 6 6 6 ...
##  $ newdata.name: chr &quot;bamako_clean[11:25, ]&quot;
##  $ nsigmas     : num 3
##  $ limits      : num [1, 1:2] 9.95 10.05
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##  $ violations  :List of 2
##  - attr(*, &quot;class&quot;)= chr &quot;qcc&quot;</code></pre>
<pre class="r"><code>qcc(data = bamako_clean[1:10, ],
    newdata = bamako_clean[11:25,], 
    type = &quot;R&quot;, 
    title = &quot;Lamp weight \n R chart&quot;,
    xlab = &quot;Sample group&quot;)</code></pre>
<p><img src="IndustRialds_files/figure-html/unnamed-chunk-50-2.png" width="672" /></p>
<pre><code>## List of 15
##  $ call        : language qcc(data = bamako_clean[1:10, ], type = &quot;R&quot;, newdata = bamako_clean[11:25,      ], title = &quot;Lamp weight \n R char| __truncated__
##  $ type        : chr &quot;R&quot;
##  $ data.name   : chr &quot;bamako_clean[1:10, ]&quot;
##  $ data        : num [1:10, 1:6] 9.99 9.97 9.98 10.07 10.01 ...
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##  $ statistics  : Named num [1:10] 0.0652 0.0833 0.1302 0.1286 0.0818 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:10] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; ...
##  $ sizes       : int [1:10] 6 6 6 6 6 6 6 6 6 6
##  $ center      : num 0.102
##  $ std.dev     : num 0.0402
##  $ newstats    : Named num [1:15] 0.1202 0.1434 0.0638 0.0946 0.1016 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:15] &quot;11&quot; &quot;12&quot; &quot;13&quot; &quot;14&quot; ...
##  $ newdata     : num [1:15, 1:6] 9.94 10.01 10.01 9.98 10.03 ...
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##  $ newsizes    : int [1:15] 6 6 6 6 6 6 6 6 6 6 ...
##  $ newdata.name: chr &quot;bamako_clean[11:25, ]&quot;
##  $ nsigmas     : num 3
##  $ limits      : num [1, 1:2] 0 0.204
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##  $ violations  :List of 2
##  - attr(*, &quot;class&quot;)= chr &quot;qcc&quot;</code></pre>
<p>Adapted from <span class="citation">(<a href="references.html#ref-Bass2007" role="doc-biblioref">Bass 2007</a>)</span></p>

</div>
<!-- </div> -->



<p style="text-align: center;">
<a href="6-SPC.html"><button class="btn btn-default">Previous</button></a>
<a href="7-Rpck.html"><button class="btn btn-default">Next</button></a>
</p>
</div>
</div>


</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>

</body>
</html>
